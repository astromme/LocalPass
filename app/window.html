<!DOCTYPE html>
<html ng-app="" ng-csp>
  <head>
  	<link rel="stylesheet" type="text/css" href="lib/jsoneditor/jsoneditor.css">
  	<link rel="stylesheet" type="text/css" href="lib/bootstrap/css/bootstrap.css">
  	<link rel="stylesheet" type="text/css" href="lib/angularui/angular-ui.css">
  	<link rel="stylesheet" type="text/css" href="app.css">

    <script type="text/javascript" src="lib/jquery/jquery-1.8.3.js"></script>
    <script type="text/javascript" src="lib/bootstrap/js/bootstrap.js"></script>
    <script type="text/javascript" src="lib/angularjs/angular.js"></script>
    <script type="text/javascript" src="lib/angularui/angular-ui.js"></script>
    <script type="text/javascript" src="lib/jsoneditor/jsoneditor.js"></script>
    <script type="text/javascript" src="lib/sjcl/sjcl.min.js"></script>
    <script type="text/javascript" src="lib/sha1/sha1.js"></script>
    <script type="text/javascript" src="lib/pbkdf2/pbkdf2.js"></script>
    <script type="text/javascript" src="lib/xml2json/xml2json.js"></script>
    <script type="text/javascript" src="app.js"></script>
  </head>
  <body ng-controller="DatabaseControl" ng-init="init()">
  	<div id="header">
	  	<h1>LocalPass</h1>
	  	<span>{{status_message}}</span>
		<div class="buttonbox">
			<button tabindex="2" ng-click="import()" ng-hide="isLocked()">Import</button>
			<button tabindex="3" ng-click="lock()" ng-hide="isLocked()">Lock</button>
		  	<button tabindex="4" ng-click="save()" ng-hide="isLocked()">Save</button>
		 </div>
	  	<button id="close_window_button" ng-click="closeWindow()"></button>
	</div>

	<div id="database_password_creation_widget"
	     ng-class="dbPasswordCreationScreenClass">
		<h2>Create a password for your database</h2>
		<form name="createPasswordForm" ng-controller="CreatePasswordControl" novalidate>
			Password: <input type="password" ng-model="password" required><br />
			Password (again): <input type="password" ng-model="password_again" required>
			<span class="error"
			      ng-show="createPasswordForm.$error.different">Passwords don't match</span><br>

	 		<input type="submit" ng-click="verifyPasswordCreation()" name="Set Password">
	 	</form>
	</div>

	<div id="database_locked_widget"
	     ng-class="dbLockScreenClass">
		<h2>Enter the password for your database</h2>
		<form name="enterPasswordForm" ng-controller="EnterPasswordControl" novalidate>
			Password: <input type="password" ng-model="password" required>
			<span class="error"
			      ng-show="enterPasswordForm.$error.incorrect">Password Incorrect (or database is corrupted)</span><br>
			<input type="submit" ng-click="verifyPassword()" name="Unlock">
		</form>
	</div>


	<div id="content">
	  	<div id="main_content">
		    <div id="jsoneditor"></div>
	  	</div>
	</div>

  	<div id="left_sidebar">
	  	<div id="entries_searchbox_container">
	  		<input id="entries_searchbox"
	  			   tabindex="5"
	  		       class="searchbox"
	  		       ng-model="searchString"
	  		       ng-change="updateSearch()"
	  		       placeholder="search..."></input>
	  		<button id="clear_search_button" ng-click="searchString = ''" ng-show="searchString.length > 0"></button>
	  	</div>

	 	<div id="entries_list">
		  	<ul name="entries">
		  		<li ng-repeat="pair in unencrypted_root.filtered_entries"
		  		    tabindex="6"
		  		    uuid="{{pair.uuid}}"
		  		    ng-class="{selected: pair.uuid==database.selected_entry}"
		  		    ng-class-odd="'odd'"
		  		    ng-class-even="'even'"
		  		    ui-keydown="{ ctrl-c : 'entryCopy($event)',
		  		                   down: 'database.selected_entry += 1',
		  		                   up: 'database.selected_entry -= 1'}"
		  		    ng-mousedown="entryClicked($event)">
		  			<span class="entry">{{pair.object.title}}</span>
		  		</li>
		  	</ul>
		</div>

		<div id="add_entry_form_container">
		  	<form ng-submit="addEntryClicked()">
		  		<input tabindex="7" id="add_entry_input" type="text" ng-model="newEntryTitle" placeholder="add new entry here">
		  		<input class="btn-primary" type="submit" value="add" style="display:none;">
		  	</form>
	  	</div>
  	</div>

  	<div id="footer">
  	</div>

  </body>
</html>