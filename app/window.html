<!DOCTYPE html>
<html ng-app="" ng-csp>
  <head>
  	<link rel="stylesheet" type="text/css" href="lib/jsoneditor/jsoneditor.css">
  	<link rel="stylesheet" type="text/css" href="lib/bootstrap/css/bootstrap.css">
  	<link rel="stylesheet" type="text/css" href="lib/angularui/angular-ui.css">
  	<link rel="stylesheet" type="text/css" href="app.css">

    <script type="text/javascript" src="lib/jquery/jquery-1.8.3.js"></script>
    <script type="text/javascript" src="lib/bootstrap/js/bootstrap.js"></script>
    <script type="text/javascript" src="lib/angularjs/angular.js"></script>
    <script type="text/javascript" src="lib/angularui/angular-ui.js"></script>
    <script type="text/javascript" src="lib/jsoneditor/jsoneditor.js"></script>
    <script type="text/javascript" src="lib/sjcl/sjcl.min.js"></script>
    <script type="text/javascript" src="lib/sha1/sha1.js"></script>
    <script type="text/javascript" src="lib/pbkdf2/pbkdf2.js"></script>
    <script type="text/javascript" src="lib/xml2json/xml2json.js"></script>
    <script type="text/javascript" src="app.js"></script>
  </head>
  <body ng-controller="DatabaseControl">

  	<div ui-modal class="fade modal" ng-model="create_password_modal_visibile" id="create_password_modal">
		<h2>Create a password for your database</h2>
		<form name="createPasswordForm" ng-controller="CreatePasswordControl" novalidate>
			Password: <input type="password" ng-model="password" required><br />
			Password (again): <input type="password" ng-model="password_again" required>
			<span class="error"
			      ng-show="createPasswordForm.$error.different">Passwords don't match</span><br>

	 		<input type="submit" ng-click="verifyPasswordCreation()" name="Set Password">
	 	</form>
	</div>

	<div ui-modal class="fade modal" ng-model="enter_password_modal_visibile" id="enter_password_modal">
		<h2>Enter the password for your database</h2>
		<form name="enterPasswordForm" ng-controller="EnterPasswordControl" novalidate>
			Password: <input type="password" ng-model="password" required>
			<span class="error"
			      ng-show="enterPasswordForm.$error.incorrect">Password Incorrect (or database is corrupted)</span><br>
	 		<input type="submit" ng-click="verifyPassword()" name="Unlock">
	 	</form>
	</div>

  	<div id="header">
	  	<h1>LocalPass</h1>
	  	<input id="database_name_entry" type="text" ng-model="database.name" ng-click="$event.currentTarget.select()" ng-hide="database == undefined" />
		<div class="buttonbox">
			<button ng-click="new()">New</button>
			<button ng-click="import()">Import</button>
		  	<button ng-click="unlock()" ng-show="isLocked()">Unlock</button>
		  	<button ng-click="save()">Save</button>
		  	<button ng-click="lock()" ng-hide="isLocked()">Lock</button>
		 </div>
	  	<button id="close_window_button" ng-click="closeWindow()"></button>
	</div>

	<div id="content">
	  	<div id="main_content">
		    <div id="jsoneditor"></div>
	  	</div>
	</div>

  	<div id="left_sidebar">
	  	<div id="entries_searchbox_container">
	  		<input id="entries_searchbox"
	  		       class="searchbox"
	  		       ng-model="searchString"
	  		       ng-change="updateSearch()"
	  		       placeholder="search..."></input>
	  	</div>

	 	<div id="entries_list">
		  	<ul name="entries" size=5>
		  		<li ng-repeat="entry in unencrypted_root.filtered_entries"
		  		    uuid="{{entry.uuid}}"
		  		    ng-class="{selected: entry.uuid==database.selected_entry}"
		  		    ng-class-odd="'odd'"
		  		    ng-class-even="'even'"
		  		    ng-mousedown="entryClicked($event)">
		  			<span class="entry">{{entry.title}}</span>
		  		</li>
		  	</ul>
		</div>

		<div id="add_entry_form_container">
		  	<form ng-submit="addEntryClicked()">
		  		<input id="add_entry_input" type="text" ng-model="newEntryTitle" placeholder="add new entry here">
		  		<input class="btn-primary" type="submit" value="add" style="display:none;">
		  	</form>
	  	</div>
  	</div>

  	<div id="footer">
  	</div>

  </body>
</html>