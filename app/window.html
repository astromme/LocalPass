<!DOCTYPE html>
<html ng-app="" ng-csp>
  <head>
  	<link rel="stylesheet" type="text/css" href="lib/jsoneditor/jsoneditor.css">
  	<link rel="stylesheet" type="text/css" href="lib/bootstrap/css/bootstrap.css">
  	<link rel="stylesheet" type="text/css" href="lib/angularui/angular-ui.css">
  	<link rel="stylesheet" type="text/css" href="app.css">

    <script type="text/javascript" src="lib/jquery/jquery-1.8.3.js"></script>
    <script type="text/javascript" src="lib/q/q.js"></script>
    <script type="text/javascript" src="lib/bootstrap/js/bootstrap.js"></script>
    <script type="text/javascript" src="lib/angularjs/angular.js"></script>
    <script type="text/javascript" src="lib/angularui/angular-ui.js"></script>
    <script type="text/javascript" src="lib/jsoneditor/jsoneditor.js"></script>
    <script type="text/javascript" src="lib/sjcl/sjcl.min.js"></script>
    <script type="text/javascript" src="lib/sha1/sha1.js"></script>
    <script type="text/javascript" src="lib/pbkdf2/pbkdf2.js"></script>
    <script type="text/javascript" src="lib/xml2json/xml2json.js"></script>
    <script type="text/javascript" src="lib/pouchdb/pouch.alpha.min.js"></script>
    <script type="text/javascript" src="app.js"></script>
  </head>
  <body ng-controller="DatabaseControl" ng-init="init()">
  	<div id="header">
	  	<h1>LocalPass</h1>
	  	<span>{{status_message}}</span>
		<div class="buttonbox">
			<button tabindex="2" ng-click="import()" ng-hide="isLocked()">Import</button>
			<button tabindex="3" ng-click="lock()" ng-hide="isLocked()">Lock</button>
		 </div>
	  	<button id="close_window_button" ng-click="closeWindow()"></button>
	</div>

	<div id="database_password_creation_widget"
		 class="dbModalDialog"
	     ng-class="dbPasswordCreationScreenClass">
	    <div id='database_password_creation_widget_inner' class="dbModalDialogInner">
	    	<img src="preferences-desktop-cryptography.png">
			<h2>Set the database password</h2>
			<form name="createPasswordForm" ng-controller="CreatePasswordControl" novalidate>
				Password: <input type="password" ng-model="password" required><br />
				Password (again): <input type="password" ng-model="password_again" required>
				<span class="error"
				      ng-show="createPasswordForm.$error.different">Passwords don't match</span><br>

		 		<input type="submit" ng-click="verifyPasswordCreation()" name="Set Password">
		 	</form>
		 </div>
	</div>

	<div id="database_locked_widget"
		 class="dbModalDialog"
	     ng-class="dbLockScreenClass">
	    <div id='database_locked_widget_inner' class="dbModalDialogInner">
	    	<img src="preferences-desktop-cryptography.png">
			<h2>The database is locked</h2>
			<form id="database_locked_widget_form"
			      name="enterPasswordForm" ng-controller="EnterPasswordControl" novalidate>
				<h3>Master Password</h3>
				<input type="password" ng-model="password" required><br>
				<input type="submit" ng-click="verifyPassword()" name="Unlock" value="Unlock">
			</form>
		</div>
	</div>


	<div id="content">
	  	<div id="main_content">
		    <div id="jsoneditor"></div>
	  	</div>
	</div>

  	<div id="left_sidebar">
	  	<div id="entries_searchbox_container">
	  		<input id="entries_searchbox"
	  			   tabindex="5"
	  		       class="searchbox"
	  		       ng-model="searchString"
	  		       ng-change="updateSearch()"
	  		       placeholder="search..."></input>
	  		<button id="clear_search_button" ng-click="searchString = ''" ng-show="searchString.length > 0"></button>
	  	</div>

	 	<div id="entries_list">
		  	<ul name="entries">
		  		<li ng-repeat="pair in decrypted.filtered_entries"
		  		    tabindex="6"
		  		    uuid="{{pair.uuid}}"
		  		    ng-class="{selected: pair.uuid==decrypted.selected_entry_id}"
		  		    ng-class-odd="'odd'"
		  		    ng-class-even="'even'"
		  		    ui-keydown="{ ctrl-c : 'entryCopy($event)',
		  		                   down: 'decrypted.selected_entry_id += 1',
		  		                   up: 'decrypted.selected_entry_id -= 1'}"
		  		    ng-mousedown="entryClicked($event)">
		  			<span class="entry">{{pair.object.contents.title}}</span>
		  		</li>
		  	</ul>
		</div>

		<div id="add_entry_form_container">
		  	<form ng-submit="addEntryClicked()">
		  		<input tabindex="7" id="add_entry_input" type="text" ng-model="newEntryTitle" placeholder="add new entry here">
		  		<input class="btn-primary" type="submit" value="add" style="display:none;">
		  	</form>
	  	</div>
  	</div>

  	<div id="footer">
  	</div>

  </body>
</html>